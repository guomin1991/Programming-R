```
meltsubscribeanalysis
?melt
ggplot(meltsubscribeanalysis,aes(var1,value,group=var2,colour=var2))+
geom_line()+
geom_point()+
geom_smooth(method = 'loess')+
scale_x_date() +xlab('') + ylab('')
ggplot(meltsubscribeanalysis,aes(Var1,value,group=Var2,colour=Var2))+
geom_line()+
geom_point()+
geom_smooth(method = 'loess')+
scale_x_date() +xlab('') + ylab('')
fm<-glm(formula=subscribe~profit+isweekend,family=poisson,data=subscribeanalysis)
fm
fm<-lm(formula=subscribe~profit+isweekend,data=subscribeanalysis)
fm
summary(fm)
plot(fm)
plot(fm)
ggplot(subscribeanalysis,aes(x=profit,y=subscribe))+
geom_point(color='#009E73')+
geom_smooth(method = 'loess',color='#D55E00')+
scale_x_date() +xlab('profit')+ylab('subscribe')
ggplot(subscribeanalysis,aes(x=profit,y=subscribe))+
geom_point(color='#009E73')+
geom_smooth(method = 'loess',color='#D55E00')+
xlab('profit')+ylab('subscribe')
ggplot(subscribeanalysis,aes(x=profit,y=subscribe))+
geom_point(color='#009E73')+
geom_smooth(method = 'lm',color='#D55E00')+
xlab('profit')+ylab('subscribe')
ggplot(subscribeanalysis,aes(x=profit,y=subscribe))+
geom_point()+
geom_smooth(method = c('loess','lm'))+
xlab('profit')+ylab('subscribe')
ggplot(subscribeanalysis,aes(x=profit,y=subscribe))+
geom_point()+
geom_smooth(method = c('loess','lm'))+
xlab('profit')+ylab('subscribe')
ggplot(subscribeanalysis,aes(x=profit,y=subscribe))+
geom_point(color='#009E73')+
geom_smooth(method = 'loess',color='#D55E00')+
geom_smooth(method = 'lm'),color='#D55E00')+
xlab('profit')+ylab('subscribe')
ggplot(subscribeanalysis,aes(x=profit,y=subscribe))+
geom_point(color='#009E73')+
geom_smooth(method = 'loess', color='#D55E00')+
geom_smooth(method = 'lm', color='#D55E00')+
xlab('profit')+ylab('subscribe')
ggplot(subscribeanalysis,aes(x=profit,y=subscribe))+
geom_point(color='#009E73')+
geom_smooth(method = 'loess')+
geom_smooth(method = 'lm')+
xlab('profit')+ylab('subscribe')
ggplot(subscribeanalysis,aes(x=profit,y=subscribe))+
geom_point(color='#009E73')+
geom_smooth(method = 'loess', color='#D55E00')+
geom_smooth(method = 'lm', color='#D55E00')+
xlab('profit')+ylab('subscribe')
ggplot(subscribeanalysis,aes(x=profit,y=subscribe))+
geom_point(color='#009E73')+
geom_smooth(method = 'loess', color='#CC79A7')+
geom_smooth(method = 'lm', color='#D55E00')+
xlab('profit')+ylab('subscribe')
?smooth
ggplot(subscribeanalysis,aes(x=profit,y=subscribe))+
geom_point(color='#009E73')+
geom_smooth(method = 'loess', color='#CC79A7',lwd = 2)+
geom_smooth(method = 'lm', color='#D55E00',lwd = 2)+
xlab('profit')+ylab('subscribe')
ggplot(subscribeanalysis,aes(x=profit,y=subscribe))+
geom_point(color='#009E73')+
geom_smooth(method = 'loess', color='#CC79A7',lwd = 2)+
xlab('profit')+ylab('subscribe')
ggplot(subscribeanalysis,aes(x=profit,y=subscribe))+
geom_point(color='#009E73')+
geom_smooth(method = 'lm', color='#D55E00',lwd = 2)+
xlab('profit')+ylab('subscribe')
ggplot(subscribeanalysis,aes(x=profit,y=subscribe))+
geom_point(color='#009E73')+
geom_smooth(method = 'lm', color='#D55E00',lwd = 2)+
xlab('profit')+ylab('subscribe')
ggplot(subscribeanalysis,aes(x=profit,y=subscribe))+
geom_point(color='#009E73')+
geom_smooth(method = 'loess', color='#CC79A7',lwd = 2)+
xlab('profit')+ylab('subscribe')
plot(lm)
fm<-lm(formula=subscribe~profit+isweekend,data=subscribeanalysis)
summary(fm)
plot(lm)
summary(fm)
plot(fm)
residuals(fm)
plot(residuals(fm))
plot(fm)
summary(fm)
sa <- subset(subscribeanalysis2,day != '2013-08-21')
subscribeanalysis2 <- subscribeanalysis;
sa <- subset(subscribeanalysis2,day != '2013-08-21')
dim(sa)
sa <- subset(subscribeanalysis2,day != '2013-09-06')
plot(fm)
fm<2-lm(formula=subscribe~profit,data=sa)
summary(fm)
summary(fm2)
fm2<-lm(formula=subscribe~profit,data=sa)
summary(fm2)
plot(fm2)
dim(sa)
sa <- subset(subscribeanalysis2,day != '2013-08-21')
sa <- subset(subscribeanalysis2,day != '2013-09-06')
sa <- subset(subscribeanalysis2,day != '2013-09-24')
dim(sa)
sa <- subset(subscribeanalysis2,day != '2013-08-21')
sa <- subset(sa,day != '2013-09-06')
sa <- subset(sa,day != '2013-09-24')
dim(sa)
fm2<-lm(formula=subscribe~profit,data=sa)
summary(fm2)
plot(fm2)
install.packages(data.table)
install.packages("data.table")
library(data.table)
help("data.table")
head(kuaibao.messages)
days = kuaibao.messages$day
dim(days)
days = kuaibao.messages$day
dim(days)
days <- kuaibao.messages$day
dim(days)
dim(kuaibao.messages)
?seq
?rep
?repeate
?repeat
?
??repet
length(days)
days <- data.frame(kuaibao.messages$day,rep(1,70869))
dim(days)
?by
head(days)
tapply(kuaibao.messages.day,rep.1..70869.,sum)
tapply(kuaibao.messages.day,rep.1..70869,sum)
by(kuaibao.messages,day,sum())
head(kuaibao.messages)
by(kuaibao.messages,kuaibao.messages$day,sum())
by(kuaibao.messages,kuaibao.messages$day,sum)
by(days,kuaibao.messages$day,sum)
tapply(kuaibao.messages,day,length)
tapply(kuaibao.messages$id,kuaibao.messages$day,length)
messagesperday <- tapply(kuaibao.messages$id,kuaibao.messages$day,length)
head(messagesperday)
messagesperday <- tapply(kuaibao.messages$id,kuaibao.messages$day,length)
head(t(messagesperday))
head(messagesperday)
head(messagesperday)
dim(messagesperday)
class(messagesperday)
msgana<-data.frame(kuaibao.messages$day,fund.profits$profit[-1:7],messagesperday)
msgana<-data.frame(kuaibao.messages$day,kuaibao.fund$profit[-1:7],messagesperday)
msgana<-data.frame(kuaibao.messages$day,kuaibao.fund[-(1:7),]$profit,messagesperday)
kuaibao.fund[-(1:7),]$profit
kuaibao.messages$day
msgana<-data.frame(kuaibao.fund[-(1:7),]$day,kuaibao.fund[-(1:7),]$profit,messagesperday)
msgana
msgana<-data.frame(kuaibao.fund[-(1:7),]$day,kuaibao.fund[-(1:7),]$profit,kuaibao.user$subscribe,messagesperday,isWeekend(kuaibao.fund[-(1:7),]$day))
colnames(subscribeanalysis) <- c('day','profit','subscribe','message','isweekend')
msgana
msgana<-data.frame(kuaibao.fund[-(1:7),]$day,kuaibao.fund[-(1:7),]$profit,kuaibao.user$subscribe,messagesperday,isWeekend(kuaibao.fund[-(1:7),]$day))
colnames(msgana) <- c('day','profit','subscribe','message','isweekend')
msgana
lm.msgana <- lm(message~profit+subscribe+isweekend,data=msgana)
summary(lm.msganana)
summary(lm.msgana)
plot(lm.msgana)
？loess
?loess
loess.msgana <- loess(message~profit+subscribe+isweekend, data=msgana)
loess.subscribeanalysis <- loess(subscribe~profit, data=subscribeanalysis)
summary(loess.subscribeanalysis)
loess.subscribeanalysis <- loess(subscribe~profit, data=subscribeanalysis2)
summary(loess.subscribeanalysis)
install.packages("scales")
install.packages("scales")
install.packages("scales")
install.packages("scales")
sessionInfo()
head(kuaibao.messages)
dim(kuaibao.messages)
msgana<-data.frame(kuaibao.fund[-(1:7),]$day,kuaibao.fund[-(1:7),]$profit,kuaibao.user$subscribe,messagesperday,isWeekend(kuaibao.fund[-(1:7),]$day))
colnames(msgana) <- c('day','profit','subscribe','message','isweekend')
msgana
lm.msgana <- lm(message~profit+subscribe+isweekend,data=msgana)
summary(lm.msgana)
plot(lm.msgana)
loess.msgana <- loess(message~profit+subscribe+isweekend, data=msgana)
glm.msgana <- glm(message~profit+subscribe+isweekend, family=gaussian,data=msgana)
summary(glm.msgana)
plot(glm.msgana)
shapiro.test(msgana$subscribe)
msgana<-data.frame(kuaibao.fund[-(1:7),]$day,kuaibao.fund[-(1:7),]$profit,kuaibao.user$subscribe,messagesperday)
colnames(msgana) <- c('day','profit','subscribe','message')
head(msgana)
plot(message~profit+subscribe)
plot(msgana$message~msgana$profit+msgana$subscribe)
ts()
?ts
messagestimeseries <=ts(msgana)
messagestimeseries <- ts(msgana)
plot.ts(messagestimeseries)
lm.msgana <- lm(message~profit+subscribe,data=msgana)
summary(lm.msgana)
library("TTR")
messagestimeseriesSMA3 <- SMA(messagestimeseries,n=3)
plot.ts(messagestimeseriesSMA3)
messagestimeseries <- ts(msgana$message)
plot.ts(messagestimeseries)
plot.ts(messagestimeseries)
messagestimeseries
plot.ts(messagestimeseries)
messagestimeseriesSMA3 <- SMA(messagestimeseries,n=3)
messagestimeseriesSMA3
plot(msgana$message~msgana$profit+msgana$subscribe)
plot.ts(messagestimeseriesSMA3)
messagestimeseriesSMA3 <- SMA(messagestimeseries,n=5)
plot.ts(messagestimeseriesSMA3)
messagestimeseriescomponents <- decompose(messagestimeseries)
messagestimeseriescomponents <- decompose(messagestimeseriesSMA3)
head(msgana)
lm.msgana <- lm(message~profit+subscribe,data=msgana)
summary(lm.msgana)
msgana<-data.frame(kuaibao.fund[-(1:7),]$day,kuaibao.fund[-(1:7),]$profit,kuaibao.user$subscribe,messagesperday,isWeekend(kuaibao.fund[-(1:7),]$day))
colnames(msgana) <- c('day','profit','subscribe','message','isweekend')
head(msgana)
msgana<-data.frame(kuaibao.fund[-(1:7),]$day,kuaibao.fund[-(1:7),]$profit,kuaibao.user$subscribe,messagesperday,isWeekend(kuaibao.fund[-(1:7),]$day))
library(timeDate)
msgana<-data.frame(kuaibao.fund[-(1:7),]$day,kuaibao.fund[-(1:7),]$profit,kuaibao.user$subscribe,messagesperday,isWeekend(kuaibao.fund[-(1:7),]$day))
colnames(msgana) <- c('day','profit','subscribe','message','isweekend')
head(msgana)
shapiro.test(msgana$subscribe)
lm.msgana <- lm(message~profit+subscribe+isweekend,data=msgana)
summary(lm.msgana)
anoa(lm.msgana)
anova(lm.msgana)
lm2.msgana <- lm(message~profit+subscribe,data=msgana)
summary(lm2.msgana)
anova(lm.msgana.lm2.msgana)
lm2.msgana <- lm(message~profit+subscribe,data=msgana)
summary(lm2.msgana)
anova(lm.msgana.lm2.msgana)
anova(lm.msgana,lm2.msgana)
final.lm.msgana<-step(lm.msgana)
final.lm.msgana.predictions <- predict(final.lm.msgana,msgana)
plot(final.lm.msgana.predictions$message,msgana$message)
final.lm.msgana.predictions
plot(final.lm.msgana.predictions,msgana$message)
abine(0,1,lty=2)
abline(0,1,lty=2)
kuaibao.user
ks.test(kuaibao.fund$profit)
shapiro.test(kuaibao.fund$profit)
head(kuaibao.fund)
text <- readLines('honglou.txt',encoding='UTF-8')
text <- readLines('d:\\honglou.txt',encoding='UTF-8')
text <- readLines('d:\\honglou.txt',encoding='UTF-8')
text <- readLines('honglou.txt',encoding='UTF-8')
library(ggplot2)
library(rmmseg4j)
library(tm)
library(MASS)
library(proxy)
install.packages("rmmseg4j")
install.packages("MASS")
install.packages("MASS")
install.packages("MASS")
install.packages("MASS")
install.packages("proxy")
install.packages("rmmseg4j")
install.packages("tm")
library(ggplot2)
library(rmmseg4j)
library(tm)
library(MASS)
library(proxy)
text <- text[text!='']
chapbegin <- grep('第.{1,3}回 ',text)
chapend <- c((chapbegin-1)[-1],length(text))
paragraph <- chapend-chapbegin
plotdata1 <- data.frame(freq=paragraph,cha=1:120)
p1 <- ggplot(data=plotdata1,aes(x=cha,y=freq))
p1 + geom_bar(stat="identity",fill='black',colour='white')+
geom_vline(x=80,colour='red4',size=1,linetype=2)
wilcox.test(paragraph[1:80],paragraph[81:120])
library(coin) #置换检验
testdata <- data.frame(freq=paragraph,cha=factor(rep(1:2,times=c(80,40))))
oneway_test(freq~cha,data=testdata,distribution='exact')
chaptext <- character(120)
for ( i in 1:120) {
temp <- text[chapbegin[i]:chapend[i]]
chaptext[i] <- paste(temp,collapse='')
}
parachar <- nchar(chaptext)
findfun <- function(name) {
gregout <- gregexpr(name,chaptext)
namefun <- function(x) { #x表示章节序号
temp <- attr(gregout[[x]],'match.length')
ifelse(temp[1]>0,length(temp),0)
}
sapply(1:120,FUN=namefun)
}
x1 <- findfun('宝玉')
x2 <- findfun('黛玉')
x3 <- findfun('宝钗')
x <- c(x1,x2,x3)
x
people <- factor(rep(1:3,each=120),
labels=c('宝玉','黛玉','宝钗'))
plotdata4 <- data.frame(freq=x,people=people,cha=1:120)
plotdata4
p4 <- ggplot(data=plotdata4,aes(x=cha,y=freq,fill=people,colour=people))
p4 + geom_bar(stat="identity",position='fill')
x1 <- findfun('？')
x2 <- findfun('。')
x3 <- findfun('！')
biaodian <- x1+x2+x3
plotdata2 <- data.frame(paragraph,biaodian,parachar,cha=1:120)
p2 <- ggplot(data=plotdata2,aes(x=cha,y=biaodian))
p2 + geom_bar(stat="identity",fill='black',colour='white')+
geom_vline(x=80,colour='red4',size=1,linetype=2)
p3 <- ggplot(data=plotdata2,aes(x=cha,y=biaodian/paragraph))
p3 + geom_point()+stat_smooth(method='loess',se=F,span = 0.2)+
geom_vline(x=80,colour='red4',size=1,linetype=2)
words <- unlist(lapply(X=chaptext,FUN=mmseg4j))
# 组成语料库格式
wordcorpus <- Corpus(VectorSource(words))
dtm <- DocumentTermMatrix(wordcorpus,
control = list(weighting = weightTfIdf))
chapdist <- dissimilarity(dtm, method = "cosine")
mds=isoMDS(chapdist,k=2)
x = mds$points[,1]
y = mds$points[,2]
cha=factor(rep(1:2,times=c(80,40)),labels=c('前八十回','后四十回'))
plotdata3 <- data.frame(x,y,cha)
p=ggplot(plotdata3,aes(x,y))
p+geom_point(aes(colour=cha))
mds=isoMDS(chapdist,k=2)
x = mds$points[,1]
y = mds$points[,2]
mds=isoMDS(chapdist,k=2)
isoMDS
library(MASS)
install.packages("MASS")
install.packages("MASSI")
library(MASS)
mds=isoMDS(chapdist,k=2)
x = mds$points[,1]
y = mds$points[,2]
cha=factor(rep(1:2,times=c(80,40)),labels=c('前八十回','后四十回'))
plotdata3 <- data.frame(x,y,cha)
p=ggplot(plotdata3,aes(x,y))
p+geom_point(aes(colour=cha))
library(ggplot2)
x = mds$points[,1]
y = mds$points[,2]
cha=factor(rep(1:2,times=c(80,40)),labels=c('前八十回','后四十回'))
plotdata3 <- data.frame(x,y,cha)
p=ggplot(plotdata3,aes(x,y))
p+geom_point(aes(colour=cha))
cha=factor(rep(1:2,times=c(80,40)),labels=c('前八十回','后四十回'))
plotdata3 <- data.frame(x,y,cha)
p=ggplot(plotdata3,aes(x,y))
p+geom_point(aes(colour=cha))
sessionInfo（）
sessionInfo()
head(kuaibao.user)
head(kuaibao.messages)
sessionInfo()
load(file ='kuaibao.RData')
load(file ='kuaibao/kuaibao.RData')
head(kuaibao.messages)
dim(kuaibao.messages)
ggplot(kuaibao.messages,aes(x=type_detail,color=type_detail,fill=type_detail))+
geom_histogram()+
scale_y_log10(breaks = trans_breaks("log10", function(x) 10^x),
labels = trans_format("log10", math_format(10^.x)))
library(ggplot2)
ggplot(kuaibao.messages,aes(x=type_detail,color=type_detail,fill=type_detail))+
geom_histogram()+
scale_y_log10(breaks = trans_breaks("log10", function(x) 10^x),
labels = trans_format("log10", math_format(10^.x)))
library(scales)
ggplot(kuaibao.messages,aes(x=type_detail,color=type_detail,fill=type_detail))+
geom_histogram()+
scale_y_log10(breaks = trans_breaks("log10", function(x) 10^x),
labels = trans_format("log10", math_format(10^.x)))
ggplot(kuaibao.messages,aes(x=day))+
geom_histogram(aes(y=..count..), binwidth=.5)+
geom_rect(data = kuaibao.messages,aes(xmin = day, xmax =day+1 ,
fill = isWeekend(day)),ymin = 0, ymax =2500,alpha=0.005)
library(ggplot2)
library(timeDate)
library(reshape2)
ggplot(kuaibao.messages,aes(x=day))+
geom_histogram(aes(y=..count..), binwidth=.5)+
geom_rect(data = kuaibao.messages,aes(xmin = day, xmax =day+1 ,
fill = isWeekend(day)),ymin = 0, ymax =2500,alpha=0.005)
ggplot(kuaibao.messages,aes(x=day,fill=type_detail))+
geom_histogram(aes(y=..count..), binwidth=.5)
load(file ='kuaibao/kuaibao.RData')
#connect data
library(RODBC)
conn <- odbcConnect('kuaibao')
kuaibao.userbase <- 506
###########fund data analysis
kuaibao.fund <- sqlQuery(conn,"SELECT date as day,profit,rate,updatetime FROM fund ORDER BY updatetime ASC")
dim(kuaibao.fund)
head(kuaibao.fund)
###########user data analysis
kuaibao.user <- sqlQuery(conn , "SELECT  b.day as day,
SUM(IF(b.type = \'subscribe\',b.num , 0)) AS subscribe,
SUM(IF(b.type = \'unsubscribe\',b.num , 0)) AS unsubscribe
FROM (SELECT DATE(msgtime) AS day ,type_detail AS type ,COUNT(*) AS num FROM message a WHERE  msg_type = 5 GROUP BY DATE(a.msgtime),a.type_detail) b
GROUP BY b.day")
kuaibao.user$newuser <- kuaibao.user$subscribe - kuaibao.user$unsubscribe
kuaibao.user$totaluser<- cumsum(kuaibao.user$newuser) + kuaibao.userbase
kuaibao.user$activeuser <- sqlQuery(conn , "SELECT COUNT(DISTINCT(fromuser)) as activeuser FROM  message WHERE DATE(msgtime)>\'2013-07-22\' GROUP BY DATE(msgtime)" )
dim(kuaibao.user)
head(kuaibao.user)
###########messages data analysis
kuaibao.messages <- sqlQuery(conn,'
SELECT   id, userid, sex,msgtime ,date(msgtime) as day,hour(msgtime) as hour,msg_type,type_detail,content
FROM
message WHERE DATE(msgtime)>\'2013-07-22\' ',nullstring = NA_character_, na.strings = "NA")
dim(kuaibao.messages)
head(kuaibao.messages)
save(kuaibao.user,kuaibao.fund,kuaibao.messages,file ='kuaibao/kuaibao.RData')
#connect data
library(RODBC)
conn <- odbcConnect('kuaibao')
kuaibao.userbase <- 506
###########fund data analysis
kuaibao.fund <- sqlQuery(conn,"SELECT date as day,profit,rate,updatetime FROM fund ORDER BY updatetime ASC")
dim(kuaibao.fund)
head(kuaibao.fund)
###########user data analysis
kuaibao.user <- sqlQuery(conn , "SELECT  b.day as day,
SUM(IF(b.type = \'subscribe\',b.num , 0)) AS subscribe,
SUM(IF(b.type = \'unsubscribe\',b.num , 0)) AS unsubscribe
FROM (SELECT DATE(msgtime) AS day ,type_detail AS type ,COUNT(*) AS num FROM message a WHERE  msg_type = 5 GROUP BY DATE(a.msgtime),a.type_detail) b
GROUP BY b.day")
kuaibao.user$newuser <- kuaibao.user$subscribe - kuaibao.user$unsubscribe
kuaibao.user$totaluser<- cumsum(kuaibao.user$newuser) + kuaibao.userbase
kuaibao.user$activeuser <- sqlQuery(conn , "SELECT COUNT(DISTINCT(fromuser)) as activeuser FROM  message WHERE DATE(msgtime)>\'2013-07-22\' GROUP BY DATE(msgtime)" )
dim(kuaibao.user)
head(kuaibao.user)
###########messages data analysis
kuaibao.messages <- sqlQuery(conn,'
SELECT   id, userid, sex,msgtime ,date(msgtime) as day,hour(msgtime) as hour,msg_type,type_detail,content
FROM
message WHERE DATE(msgtime)>\'2013-07-22\' ',nullstring = NA_character_, na.strings = "NA")
dim(kuaibao.messages)
head(kuaibao.messages)
save(kuaibao.user,kuaibao.fund,kuaibao.messages,file ='kuaibao/kuaibao.RData')
#connect data
library(RODBC)
conn <- odbcConnect('kuaibao')
kuaibao.userbase <- 506
###########fund data analysis
kuaibao.fund <- sqlQuery(conn,"SELECT date as day,profit,rate,updatetime FROM fund ORDER BY updatetime ASC")
dim(kuaibao.fund)
head(kuaibao.fund)
###########user data analysis
kuaibao.user <- sqlQuery(conn , "SELECT  b.day as day,
SUM(IF(b.type = \'subscribe\',b.num , 0)) AS subscribe,
SUM(IF(b.type = \'unsubscribe\',b.num , 0)) AS unsubscribe
FROM (SELECT DATE(msgtime) AS day ,type_detail AS type ,COUNT(*) AS num FROM message a WHERE  msg_type = 5 GROUP BY DATE(a.msgtime),a.type_detail) b
GROUP BY b.day")
kuaibao.user$newuser <- kuaibao.user$subscribe - kuaibao.user$unsubscribe
kuaibao.user$totaluser<- cumsum(kuaibao.user$newuser) + kuaibao.userbase
kuaibao.user$activeuser <- sqlQuery(conn , "SELECT COUNT(DISTINCT(fromuser)) as activeuser FROM  message WHERE DATE(msgtime)>\'2013-07-22\' GROUP BY DATE(msgtime)" )
dim(kuaibao.user)
head(kuaibao.user)
###########messages data analysis
kuaibao.messages <- sqlQuery(conn,'
SELECT   id, userid, sex,msgtime ,date(msgtime) as day,hour(msgtime) as hour,msg_type,type_detail,content
FROM
message WHERE DATE(msgtime)>\'2013-07-22\' ',nullstring = NA_character_, na.strings = "NA")
dim(kuaibao.messages)
head(kuaibao.messages)
save(kuaibao.user,kuaibao.fund,kuaibao.messages,file ='kuaibao/kuaibao.RData')
###########messages data analysis
kuaibao.messages <- sqlQuery(conn,'
SELECT  userid,,msgtime ,msg_type,type_detail,content
FROM
message WHERE DATE(msgtime)>\'2013-07-22\' ',nullstring = NA_character_, na.strings = "NA")
dim(kuaibao.messages)
head(kuaibao.messages)
kuaibao.messages <- sqlQuery(conn,'
SELECT  userid,,msgtime ,msg_type,type_detail,content
FROM
message WHERE DATE(msgtime)>\'2013-07-22\' ',nullstring = NA_character_, na.strings = "NA")
kuaibao.messages
library(RODBC)
conn <- odbcConnect('kuaibao')
kuaibao.messages <- sqlQuery(conn,'
SELECT  userid,msgtime ,msg_type,type_detail,content
FROM message WHERE msgtime IS NOT  NULL AND msgtime  ORDER BY msgtime  ',nullstring = NA_character_, na.strings = "NA")
dim(kuaibao.messages)
head(kuaibao.messages)
